# Table — Трекер привычек

[![GitHub stars](https://img.shields.io/github/stars/korgmen/table-habit-tracker)](https://github.com/korgmen/table-habit-tracker/stargazers)
[![GitHub last commit](https://img.shields.io/github/last-commit/korgmen/table-habit-tracker)](https://github.com/korgmen/table-habit-tracker/commits/main)
[![GitHub issues](https://img.shields.io/github/issues/korgmen/table-habit-tracker)](https://github.com/korgmen/table-habit-tracker/issues)
[![License](https://img.shields.io/badge/License-Apache%202.0-blue.svg)](https://github.com/korgmen/table-habit-tracker/blob/main/LICENSE.txt)

[English](./README.en.md) | [العربية](./README.ar.md) | [Español](./README.es.md) | [中文](./README.zh.md)

**Table** — это многофункциональный трекер привычек, который помогает отслеживать ежедневное выполнение задач, формировать устойчивые привычки и анализировать прогресс. Приложение работает как в браузере, так и как PWA (Progressive Web App), поддерживает оффлайн-режим, синхронизацию через Google и печать таблиц для ручного заполнения.

Современный стек: Vue 3, Vite, Pinia, TailwindCSS, vue-i18n, vue-draggable-next, Lucide icons, ESLint, Prettier, Firebase (для аутентификации и синхронизации), Vite PWA.

Приложение хранит данные локально в браузере (localStorage), с архивом по месяцам. Максимум 20 задач и 8 подзадач на задачу для оптимальной производительности.

![Скриншот приложения](https://lebedevcode.ru/table-screenshot.png)

---

## Мультиязычность
- Весь интерфейс переведен (см. `src/locales/`).
- Поддерживаемые языки: русский, английский, арабский, испанский, китайский.
- Язык можно переключить в настройках или использовать системный.

## Возможности
- **Задачи и подзадачи**: Добавление, редактирование, удаление задач и подзадач (до 8 подзадач на задачу). Drag&Drop для перестановки задач (vue-draggable-next).
- **Отметки выполнения**: Ежедневные отметки: выполнено (заполненный кружок), не выполнено (пустой), пропуск (крестик — день не учитывается в статистике). Поддержка двойного тапа на мобильных для быстрого переключения (одиночный — выполнено/стирание, двойной — пропуск). На ПК: ЛКМ — выполнено/стирание, ПКМ — пропуск.
- **Режимы работы**: 
  - Режим стирания (eraser mode) для быстрого удаления отметок.
  - Режим удаления задач (delete mode).
- **Навигация по месяцам**: Переключение месяцев, просмотр архива прошлых месяцев (данные хранятся по месяцам в localStorage). Автоматическое создание архива при смене месяца.
- **Статистика**: Расчёт процента выполнения по каждой задаче, общий средний процент, оценка по 5-балльной шкале. Два режима расчёта: по всему месяцу или только по прошедшим дням.
- **Экспорт/импорт данных**: Экспорт в JSON, импорт из файла. Полная совместимость с архивом.
- **Смена темы**: Светлая, тёмная или системная (автоматически по настройкам ОС).
- **Смена языка**: Русский, английский, арабский, испанский, китайский или системный.
- **Настройки отображения**: Разделители недель (вертикальные линии), выбор начала недели (понедельник/воскресенье).
- **Горячие клавиши**: Быстрое управление (Escape — сброс, E — стирание, D — удаление, N — новая задача, стрелки — смена месяца, S — настройки).
- **Печать**: Поддержка печати таблицы в чистом виде (без кнопок и интерфейса) для ручного заполнения на бумаге.
- **PWA-поддержка**: Установка как мобильное приложение, оффлайн-работа, автоматическое обновление с уведомлением.
- **Синхронизация**: Вход через Google для синхронизации данных в облаке (Firebase). Автоматическая загрузка/сохранение при входе.
- **Модальные окна**: Приветственное объяснение при первом запуске, подтверждения для дублирования задач, уведомление об обновлении PWA.
- **Дублирование задач**: Копирование задач из прошлого месяца в текущий.
- **Адаптивный дизайн**: Полная отзывчивость для мобильных устройств и планшетов.
- **Ограничения и оптимизации**: Максимум 20 задач для производительности; автоматическое сохранение настроек и данных между сессиями.

## Структура проекта
- `src/App.vue` — основной компонент приложения (таблица, заголовок, модалки).
- `src/main.js` — инициализация Vue, Pinia, i18n, Firebase.
- `src/stores/habitStore.js` — Pinia store: управление задачами, прогрессом, темой, языком, архивом, экспортом/импортом, настройками недель, аутентификацией и синхронизацией.
- `src/locales/` — файлы локализаций (JSON для каждого языка).
- `src/components/` — компоненты: Header, TableHeader, TaskRow, Modal, SettingsModal, Controls, OverallStats и другие.
- `src/composables/` — хуки: useHabitUtils (утилиты для недель/тем), useModals (модалки).
- `src/style.css` — глобальные стили, TailwindCSS и кастомные шрифты.
- `src/firebase.js` — конфигурация Firebase для аутентификации и Firestore.
- Конфиги: `vite.config.js` (Vite, PWA, Tailwind), `eslint.config.js` (ESLint), `.prettierrc` (Prettier), `package.json` (зависимости и скрипты).

## Быстрый старт
1. Клонируйте репозиторий:
   ```sh
   git clone https://github.com/korgmen/table-habit-tracker.git
   cd table-habit-tracker
   ```
2. Установите зависимости:
   ```sh
   pnpm install
   ```
3. Запустите в режиме разработки:
   ```sh
   pnpm run dev
   ```
4. Сборка для продакшена:
   ```sh
   pnpm run build
   ```
5. Проверка кода:
   ```sh
   pnpm run lint        # Линтинг ESLint
   pnpm run format      # Форматирование Prettier
   ```
6. Предпросмотр сборки:
   ```sh
   pnpm run preview
   ```

Для PWA: после сборки откройте в браузере и установите как приложение. Оффлайн-режим работает благодаря Service Worker.

## Основные зависимости
- [Vue 3](https://vuejs.org/) — фреймворк.
- [Vite](https://vitejs.dev/) — сборщик.
- [Pinia](https://pinia.vuejs.org/) — управление состоянием.
- [TailwindCSS](https://tailwindcss.com/) — стили.
- [vue-i18n](https://vue-i18n.intlify.dev/) — локализация.
- [vue-draggable-next](https://github.com/anish2690/vue-draggable-next) — drag&drop.
- [lucide-vue-next](https://lucide.dev/) — иконки.
- [Firebase](https://firebase.google.com/) — аутентификация и облачное хранение.
- [vite-plugin-pwa](https://vite-pwa-org.netlify.app/) — PWA-функции.
- Dev: ESLint, Prettier, eslint-plugin-vue, eslint-plugin-tailwindcss.

Полный список в `package.json`.

## Архитектура и логика
- **Хранение данных**: localStorage для задач, отметок и архива (ключ: `habitArchive`). Архив по месяцам в формате `{ "YYYY-MM": { tasks: [...] } }`. Настройки сохраняются отдельно (тема, язык, неделя).
- **Pinia store** (`habitStore.js`): Центральное управление задачами, подзадачами, отметками, статистикой, темой, языком, экспортом/импортом, неделями, модалками, аутентификацией и синхронизацией с Firestore.
- **Локализация**: vue-i18n с JSON-файлами в `src/locales/`. Автоматическое определение системного языка.
- **Темы**: Системная, светлая/тёмная. Применяется на корневом элементе.
- **PWA**: Манифест в `vite.config.js` (иконки, theme_color). Автообновление с модалкой.
- **Синхронизация**: Firebase Auth (Google) и Firestore. Данные сохраняются в `/users/{uid}`. Автозагрузка при логине.
- **Модалки**: Универсальный компонент для подтверждений, алертов, кастомного контента (приветствие, обновление).
- **Оптимизации**: Ленивая загрузка, responsive дизайн, touch-поддержка, доступность (ARIA, фокус-ловушка).

## Горячие клавиши
- Escape — сброс режимов, закрытие меню/настроек.
- E — переключение режима стирания.
- D — переключение режима удаления.
- N — добавление новой задачи.
- Стрелка влево/вправо — переключение месяца.
- S — открыть/закрыть настройки.

## Вклад
Вклад приветствуется! 
- Форкните репозиторий и создайте ветку для фичи/фикса.
- Соблюдайте стиль кода (Prettier, ESLint).
- Используйте существующие компоненты и store.
- Для новых языков — добавьте переводы в `src/locales/` (JSON).
- Перед пулл-реквестом: `pnpm run lint && pnpm run format`.
- Опишите изменения в PR, добавьте тесты если нужно.

Вопросы? Откройте issue.

## Лицензия
Apache-2.0 – [LICENSE.txt](./LICENSE.txt) | [NOTICE.txt](./NOTICE.txt)